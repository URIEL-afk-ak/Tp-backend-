# Puerto de tu API Gateway.
server.port=8080

# Nombre de la aplicaci贸n
spring.application.name=api-gateway

# Configuraci贸n de las rutas del Gateway
# Cada ruta apunta al microservicio correspondiente en su puerto espec铆fico

# Microservicio: Clientes (puerto 8081)
spring.cloud.gateway.routes[0].id=backend-service-clientes
spring.cloud.gateway.routes[0].uri=http://localhost:8081
spring.cloud.gateway.routes[0].predicates[0]=Path=/clientes/**
spring.cloud.gateway.routes[0].filters[0]=StripPrefix=1

# Microservicio: Contenedores (puerto 8082)
spring.cloud.gateway.routes[1].id=backend-service-contenedores
spring.cloud.gateway.routes[1].uri=http://localhost:8082
spring.cloud.gateway.routes[1].predicates[0]=Path=/contenedores/**
spring.cloud.gateway.routes[1].filters[0]=StripPrefix=1

# Microservicio: Dep贸sitos (puerto 8083)
spring.cloud.gateway.routes[2].id=backend-service-depositos
spring.cloud.gateway.routes[2].uri=http://localhost:8083
spring.cloud.gateway.routes[2].predicates[0]=Path=/depositos/**
spring.cloud.gateway.routes[2].filters[0]=StripPrefix=1

# Microservicio: Facturaci贸n (puerto 8084)
spring.cloud.gateway.routes[3].id=backend-service-facturacion
spring.cloud.gateway.routes[3].uri=http://localhost:8084
spring.cloud.gateway.routes[3].predicates[0]=Path=/facturacion/**
spring.cloud.gateway.routes[3].filters[0]=StripPrefix=1

# Microservicio: Rutas y Tramos (puerto 8085)
spring.cloud.gateway.routes[4].id=backend-service-rutas-tramos
spring.cloud.gateway.routes[4].uri=http://localhost:8085
spring.cloud.gateway.routes[4].predicates[0]=Path=/rutas-tramos/**
spring.cloud.gateway.routes[4].filters[0]=StripPrefix=1

# Microservicio: Rutas y Tramos - alias /tramos (puerto 8085)
spring.cloud.gateway.routes[5].id=backend-service-tramos
spring.cloud.gateway.routes[5].uri=http://localhost:8085
spring.cloud.gateway.routes[5].predicates[0]=Path=/tramos/**
spring.cloud.gateway.routes[5].filters[0]=StripPrefix=1

# Microservicio: Solicitudes (puerto 8086)
spring.cloud.gateway.routes[6].id=backend-service-solicitudes
spring.cloud.gateway.routes[6].uri=http://localhost:8086
spring.cloud.gateway.routes[6].predicates[0]=Path=/solicitudes/**
spring.cloud.gateway.routes[6].filters[0]=StripPrefix=1

# Microservicio: Tracking (puerto 8087)
spring.cloud.gateway.routes[7].id=backend-service-tracking
spring.cloud.gateway.routes[7].uri=http://localhost:8087
spring.cloud.gateway.routes[7].predicates[0]=Path=/tracking/**
spring.cloud.gateway.routes[7].filters[0]=StripPrefix=1

# Microservicio: Tracking - alias /eventos (puerto 8087)
spring.cloud.gateway.routes[8].id=backend-service-eventos
spring.cloud.gateway.routes[8].uri=http://localhost:8087
spring.cloud.gateway.routes[8].predicates[0]=Path=/eventos/**
spring.cloud.gateway.routes[8].filters[0]=StripPrefix=1

# Microservicio: Camiones (puerto 8088)
spring.cloud.gateway.routes[9].id=backend-service-camiones
spring.cloud.gateway.routes[9].uri=http://localhost:8088
spring.cloud.gateway.routes[9].predicates[0]=Path=/camiones/**
spring.cloud.gateway.routes[9].filters[0]=StripPrefix=1

# Rutas no implementadas (comentadas hasta que se creen los microservicios)
# spring.cloud.gateway.routes[10].id=backend-service-estadias
# spring.cloud.gateway.routes[10].uri=http://localhost:XXXX
# spring.cloud.gateway.routes[10].predicates[0]=Path=/estadias/**
# spring.cloud.gateway.routes[10].filters[0]=StripPrefix=1

# spring.cloud.gateway.routes[11].id=backend-service-transportistas
# spring.cloud.gateway.routes[11].uri=http://localhost:XXXX
# spring.cloud.gateway.routes[11].predicates[0]=Path=/transportistas/**
# spring.cloud.gateway.routes[11].filters[0]=StripPrefix=1

# =========================
#  CONFIGURACIN DE SEGURIDAD (Keycloak)
# El Gateway valida el token JWT y lo propaga autom谩ticamente a los servicios backend
# =========================
spring.security.oauth2.resourceserver.jwt.issuer-uri=http://localhost:8180/realms/tpi-realm